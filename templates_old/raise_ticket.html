<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raise Ticket</title>
 <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }

        form {
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        label {
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        input, textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        button {
            background-color: #007bff;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }


		
		/* Header Section */
.header {
    background-color: #2f276f;
    color: white;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

.header h1 {
    margin: 0;
    font-size: 28px;
	color: white;
}

.header p {
    margin: 5px 0 0;
    font-size: 14px;
}


.header .add-asset-btn {
    background-color: #2f276f ;
    color: white;
    padding: 10px 20px;
    font-size: 14px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: background-color 0.3s ease;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

.header .add-asset-btn:hover {
    background-color: #291e6c;
}

        .menu {
            cursor: pointer;
            font-size: 24px;
            padding: 10px;
            background-color: #2f276f ;
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }

        .menu:hover {
            background-color: #291e6c;
        }

        .menu-dropdown {
            display: none; /* Hidden by default */
            position: absolute;
            top: 60px; /* Below the menu button */
            right: 20px;
            background-color: white;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            overflow: hidden;
            z-index: 1000;
        }

        .menu-dropdown a,
        .menu-dropdown button {
            display: block;
            text-decoration: none;
            color: #2f276f ;
            padding: 10px 20px;
            border: none;
            background: none;
            text-align: left;
            width: 100%;
            cursor: pointer;
        }

        .menu-dropdown a:hover,
        .menu-dropdown button:hover {
            background-color: #f4f4f9;
        }r: #f4f4f9;
        }
		
		
		
/* Ticket Actions Section */
.ticket-actions {
    display: flex;
    justify-content: space-between;  /* Align the elements to the left and right */
    align-items: center;
    padding: 20px;
    background-color: #f4f4f9;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

/* Ticket Actions Section (For "Raise Ticket" and "View All Raised Tickets" button) */
.ticket-actions {
    display: flex;
    justify-content: space-between;  /* Align the items to the left and right */
    align-items: center;
    padding: 20px;
    background-color: #f4f4f9;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

/* Styling for "Raise Ticket" title */
.ticket-actions h1 {
    margin: 0;
    font-size: 28px;
    color: #2f276f;
}

/* Styling for the "View All Raised Tickets" button */
.view-all-button {
    background-color: #2f276f;
    color: white;
    padding: 10px 20px;
    font-size: 14px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    text-align: center; /* Ensures that text is centered */
    transition: background-color 0.3s ease, transform 0.1s;
    display: inline-block; /* Keeps it on the same line as the title */
}

.view-all-button:hover {
    background-color: #291e6c;
    transform: translateY(-2px);
}
		
		
/* Styling for the Submit Ticket button */
.submit-button {
    background-color: #2f276f;
    color: white;
    padding: 10px 20px;
    font-size: 14px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    text-align: center; /* Ensures that text is centered */
    transition: background-color 0.3s ease, transform 0.1s;
    display: inline-block;
    margin-top: 20px; /* Adds spacing between the two buttons */
}

.submit-button:hover {
    background-color: #291e6c;
    transform: translateY(-2px);
}
		

		
    </style>
</head>
<body>

    <!-- Button to view all raised tickets -->
	
	
	
	
	
	<div class="header">
        <h1>Asset Tracker</h1>
        <div class="menu" onclick="headertoggleMenu()">â˜°</div>
        <div class="menu-dropdown" id="menuDropdown">
		
            <a href="{{ url_for('it_dashboard', source=source) }}">Dashboard</a>
            <a href="{{ url_for('it_assets_index', source=source) }}">Manage IT Assets</a>
			{% if 'view_service_details' in permissions %}
			<a href="{{ url_for('service_details_index', source=source)}}">View Service Details</a>
			{% endif %} 
            {% if 'raise_ticket' in permissions %}
			<a href="{{ url_for('raised_ticket_details_index', source=source)}}">Raised Tickets</a>
            {% endif %}
			

        </div>
    </div>
	
	
<!-- Container for "Raise Ticket" title and "View All Raised Tickets" button below the header -->
<div class="ticket-actions">
    <h1>Raise Ticket</h1>
	
	<h1>
    <button class="back-button" onclick="window.location.href='{{ url_for('it_assets_index', source=source) }}'" style="color: white; background-color: #2f276f;">Back</button>
   </h1>

    <button class="view-all-button" onclick="location.href='/view_all_raised_tickets/{{ asset_id }}?source={{source}}'">
        View All Raised Tickets
    </button>
</div>

	
	
    <form action="/submit_ticket" method="POST">
	
	
		<input type="hidden" name="source" value="{{ source }}">
	
        <label for="asset_id">Asset ID</label>
        <input type="text" id="asset_id" name="asset_id" value="{{ asset_id }}" readonly>

        <label for="product_name">Product Name</label>
        <input type="text" id="product_name" name="product_name" value="{{ product_name }}" readonly>

        <label for="serial_no">Serial No</label>
        <input type="text" id="serial_no" name="serial_no" value="{{ serial_no }}" readonly>
        
        <label for="asset_category">Asset Category</label>
        <input type="text" id="asset_category" name="asset_category" value="{{ asset_category }}" readonly>
		
		
		<label for="user_name">Raised By</label>
		{% if user_name %}
			<!-- Read-only input field if user_name is provided -->
			<input type="text" id="user_name" name="user_name" value="{{ user_name }}" readonly required>
		{% else %}
			<!-- Editable input field if user_name is None -->
			<input type="text" id="user_name" name="user_name" placeholder="Enter your name" required>
		{% endif %}


        <label for="problem_description">Describe the Problem</label>
        <textarea id="problem_description" name="problem_description" rows="5" placeholder="Describe the issue..."></textarea>

        <button type="submit" class="submit-button">Submit Ticket</button>


    </form>
    
    <script>
    let source;
    
    function getUrlParameter(name) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(name);
    }
    </script>
	
	<script>
        function headertoggleMenu() {
            const menu = document.getElementById('menuDropdown');
            menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
        }

        // Close the dropdown if clicked outside
        document.addEventListener('click', function (event) {
            const dropdown = document.getElementById('menuDropdown');
            const menuButton = document.querySelector('.menu');

            if (!dropdown.contains(event.target) && !menuButton.contains(event.target)) {
                dropdown.style.display = 'none';
            }
        });
    </script>

</body>
</html>
